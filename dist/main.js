(()=>{function c(n,t,a=JSON.parse,e=JSON.stringify){let[s,l]=React.useState(()=>{try{let r=window.localStorage.getItem(n);return r?a(r):t}catch(r){return console.log(r),t}});return[s,r=>{try{let o=r instanceof Function?r(s):r;l(o),window.localStorage.setItem(n,e(o))}catch(o){console.log(o)}}]}var d={pending:"pending",rejected:"rejected",resolved:"resolved"},p={error:void 0,result:void 0,state:d.pending};function i(){let[n,t]=c("playbackrate.playbackspeed",1);return React.useEffect(()=>{loadedPlugins.LibFrontendPlay.currentAudioPlayer&&(loadedPlugins.LibFrontendPlay.currentAudioPlayer.playbackRate=n)},[n]),h("div",null,h("div",{style:{fontSize:"20px",color:"#ffffffaa",fontWeight:"800",marginBottom:"20px"}},"\u64AD\u653E\u8BBE\u7F6E"),h("label",{htmlFor:"album-size",className:"pbr-slider-label"},"\u500D\u901F/\u6162\u653E",n===1?void 0:h("button",{className:"rnp-slider-reset",onClick:()=>t(1)})),h("div",null,h("input",{type:"range",onChange:a=>{t(parseFloat(a.target.value))},className:"pbr-slider",min:.1,max:2.5,step:.01,value:n})))}plugin.onAllPluginsLoaded(function(){(async()=>{let n=await betterncm.utils.waitForElement(".spk.f-vc.f-cp.j-vol"),t=n.cloneNode(!0);t.querySelector("use").setAttribute("xlink:href","orpheus://orpheus/style/res/svg/topbar.sp.svg#set"),t.classList.add("playbackrate-settings"),n.parentElement.appendChild(t);let a=document.createElement("style");a.innerHTML=await betterncm.fs.readFileText(this.pluginPath+"/style.css"),document.head.prepend(a),loadedPlugins.LibFrontendPlay.addEventListener("updateCurrentAudioPlayer",l=>{l.detail.playbackRate=JSON.parse(localStorage["playbackrate.playbackspeed"])});let e=document.createElement("div");ReactDOM.render(h(i,null),e),document.body.appendChild(e),e.classList.add("playbackrate-settings-popup"),e.style.pointerEvents="none";let s=!1;t.addEventListener("click",l=>{s?(s=!1,e.style.opacity="0",e.style.pointerEvents="none",e.style.transform="translateY(10px)"):(s=!0,e.style.display="block",e.style.bottom=`${document.body.clientHeight-t.getBoundingClientRect().top}px`,e.style.right=`${document.body.clientWidth-t.getBoundingClientRect().left-t.clientWidth}px`,e.style.opacity="1",e.style.transform="translateY(0px)",e.style.pointerEvents="")})})()});})();
